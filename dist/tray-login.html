<html><head><meta charset="UTF-8"><template>
    <style>
tray-login .tray-vspace-sm {
  margin-bottom: 10px !important; }

tray-login .tray-vspace-md {
  margin-bottom: 15px !important; }

tray-login .tray-vspace-lg {
  margin-bottom: 25px !important; }

tray-login .tray-vspace-xlg {
  margin-bottom: 45px !important; }

tray-login svg {
  fill: currentColor;
  float: left;
  height: 15px;
  margin-right: 11px;
  padding: 0;
  width: 15px; }

tray-login .tray-input-group {
  display: block;
  margin-bottom: 11px;
  position: relative; }
  tray-login .tray-input-group.row .tray-label {
    left: 27px; }

tray-login .tray-input {
  background: #fff;
  border: 1px solid #e0dcdc;
  border-radius: 3px;
  color: #909090;
  display: block;
  font-size: 14px;
  font-weight: 300;
  height: 47px;
  line-height: 14px;
  padding: 13px 0 14px;
  text-indent: 36px;
  width: 100%; }
  tray-login .tray-input:focus {
    outline: none;
    border-color: #c0c0c0;
    border-width: 2px;
    color: #909090; }
    tray-login .tray-input:focus + .tray-label {
      color: #c7c7c7; }
  tray-login .tray-input:valid + .tray-label {
    color: #909090;
    height: 15px;
    width: 15px;
    overflow: hidden; }
  tray-login .tray-input:valid:not(.empty) ~ .tray-icon-checked {
    opacity: 1; }
  tray-login .tray-input:not(.empty):invalid {
    border-color: #f3989c;
    color: #ef6262; }
    tray-login .tray-input:not(.empty):invalid ~ .tray-label svg {
      fill: #ef6262; }
  tray-login .tray-input.empty:not([required]) + .tray-label {
    color: #c7c7c7;
    width: auto !important;
    height: auto !important; }

tray-login .tray-label {
  left: 12px;
  height: 15px;
  position: absolute;
  top: 16px; }

tray-login .tray-login-hide-password {
  border: 0;
  background-color: transparent;
  color: #c7c7c7;
  display: none;
  font-size: 10px;
  height: 25px;
  margin: 0;
  padding: 0;
  position: absolute;
  outline-width: 0;
  right: 10px;
  top: 12px;
  text-transform: uppercase; }

tray-login .empty {
  border-color: #e0dcdc;
  color: #c7c7c7; }

tray-login .tray-icon-checked {
  position: absolute;
  right: 0;
  top: 15px;
  fill: #6ABF57;
  opacity: 0;
  transition: all ease 500ms; }

@keyframes loading-rotate {
  0% {
    -webkit-transform: rotate(0);
    -moz-transform: rotate(0);
    -o-transform: rotate(0);
    -ms-transform: rotate(0);
    transform: rotate(0); }
  100% {
    -webkit-transform: rotate(360deg);
    -moz-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    transform: rotate(360deg); } }

tray-login .tray-loading {
  display: -webkit-box;
  display: -moz-box;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  align-items: center;
  background: rgba(255, 255, 255, 0.7);
  height: 100%;
  justify-content: center;
  left: 0;
  overflow: hidden;
  position: absolute;
  text-align: center;
  text-transform: lowercase;
  top: 0;
  opacity: 1;
  width: 100%;
  z-index: 1; }
  tray-login .tray-loading.tray-loading-hidden {
    opacity: 0 !important;
    z-index: -1; }

tray-login .tray-loading-mask {
  -webkit-transform-origin: 30px 30px;
  -moz-transform-origin: 30px 30px;
  -ms-transform-origin: 30px 30px;
  -o-transform-origin: 30px 30px;
  transform-origin: 30px 30px;
  animation: loading-rotate 1.2s infinite linear;
  height: 60px;
  left: 50%;
  margin-left: -30px;
  margin-top: -30px;
  -webkit-mask-image: -webkit-linear-gradient(top, #000, transparent);
  overflow: hidden;
  position: absolute;
  top: 50%;
  width: 30px; }

tray-login .tray-loading-line {
  border-radius: 50%;
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.5);
  height: 60px;
  width: 60px; }

tray-login .tray-loading-icon,
tray-login .tray-loading-icon:hover {
  -webkit-transform: rotate(0);
  -moz-transform: rotate(0);
  -o-transform: rotate(0);
  -ms-transform: rotate(0);
  transform: rotate(0);
  fill: #7f7f7f;
  height: 30px;
  width: 30px;
  position: absolute;
  left: calc(50% - 15px);
  top: calc(50% - 15px); }

/**
 * Base
 */
tray-login a,
tray-login a:hover,
tray-login a:focus,
tray-login input,
tray-login input:hover,
tray-login input:focus,
tray-login select,
tray-login select:hover,
tray-login select:focus,
tray-login label,
tray-login label:hover,
tray-login div,
tray-login button,
tray-login button:hover,
tray-login button:focus,
tray-login svg,
tray-login svg:hover {
  transition: all .3s linear; }

tray-login::before {
  background: #191919;
  background: rgba(0, 0, 0, 0.5);
  content: "";
  display: block;
  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  z-index: 9998; }

tray-login .tray-login-screens {
  display: none; }

tray-login * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  color: #909090;
  font-family: Lato, Helvetica, sans-serif;
  font-size: 14px; }

tray-login .tray-container {
  background: #fff;
  border: 1px solid rgba(0, 0, 0, 0.5);
  width: 292px;
  position: fixed;
  left: calc(50% - 146px);
  top: calc(50% - 150px);
  padding: 12px;
  z-index: 9999; }

tray-login .tray-close {
  background: #fff;
  border: 2px solid #bababa;
  border-radius: 50%;
  color: #bababa;
  cursor: pointer;
  float: right;
  font-weight: bold;
  font-size: 12px;
  line-height: 1;
  padding: 0;
  margin: 0;
  height: 21px;
  width: 21px; }

tray-login .tray-title {
  color: #8f8f8f;
  font-weight: 900;
  font-size: 19px;
  margin-top: 23px;
  margin-bottom: 25px; }

tray-login .tray-action {
  font-size: 14px;
  margin-bottom: 15px; }

tray-login .tray-well {
  background-color: #ebebeb;
  border-radius: 3px;
  border: 1px solid #efeded;
  color: #8f8f8f;
  margin-bottom: 11px;
  padding: 15px 10px;
  text-align: center; }

tray-login .tray-error-message {
  color: #ef6262; }

tray-login .tray-error-message strong {
  color: #ef6262; }

tray-login .tray-general-error-alert {
  color: #ef6262; }

tray-login .tray-btn-primary,
tray-login .tray-btn-default,
tray-login .tray-btn-facebook,
tray-login .tray-btn-otp {
  background: #6ABF57;
  display: block;
  width: 100%;
  height: 48px;
  border-radius: 3px;
  border: none;
  border-bottom: 3px solid #539E41;
  font-size: 14px;
  font-weight: bold;
  margin-bottom: 13px;
  padding: 0; }
  tray-login .tray-btn-primary:hover,
  tray-login .tray-btn-default:hover,
  tray-login .tray-btn-facebook:hover,
  tray-login .tray-btn-otp:hover {
    background: #51a43f;
    border-color: #407a32; }

tray-login .tray-btn-facebook {
  background-color: #3b5998;
  border-bottom-color: #243f77; }
  tray-login .tray-btn-facebook:hover {
    background-color: #2d4373;
    border-color: #182a50; }

tray-login .tray-btn-otp {
  background-color: #52447c;
  border-bottom-color: #3d3160;
  font-size: 13px; }
  tray-login .tray-btn-otp:hover {
    background-color: #3c325b;
    border-color: #28203e; }

tray-login .tray-btn-default,
tray-login .tray-btn-default:hover,
tray-login .tray-btn-default:active {
  background-color: #fff;
  border: 1px solid #d3d1d1;
  border-bottom-width: 3px;
  color: #bcbcbc; }

tray-login .tray-btn-primary,
tray-login .tray-btn-primary:hover,
tray-login .tray-btn-primary:active,
tray-login .tray-btn-facebook,
tray-login .tray-btn-facebook:hover,
tray-login .tray-btn-facebook:active,
tray-login .tray-btn-otp,
tray-login .tray-btn-otp:hover,
tray-login .tray-btn-otp:active {
  color: #fff;
  text-decoration: none; }

tray-login .tray-btn-hidden {
  display: none; }

</style>
    <div class="tray-container">
        <button class="tray-close">X</button>
        <div class="tray-loading tray-loading-hidden" id="tray-login-loading">
            <div class="tray-loading-mask">
                <div class="tray-loading-line"></div>
            </div>
            <svg class="tray-loading-icon tray-icon-locked" viewBox="0 0 1024 1024">
                <path class="path1" d="M796.467 417.109v-132.642c0-155.58-128.956-284.467-284.467-284.467s-284.467 128.887-284.467 284.467v132.642c-64.444 0-113.801 49.289-113.801 113.801v379.29c0.068 64.444 49.289 113.801 113.801 113.801h568.866c64.444 0 113.801-49.289 113.801-113.801v-379.29c0.068-60.689-49.289-113.801-113.732-113.801zM265.489 284.399c0-136.533 109.978-246.511 246.511-246.511s246.511 109.978 246.511 246.511v132.71h-37.956v-132.71c0-113.801-94.822-208.623-208.623-208.623s-208.555 94.822-208.555 208.623v132.71h-37.956l0.068-132.71zM682.667 284.399v132.71h-341.333v-132.71c0-94.822 75.844-170.667 170.667-170.667s170.667 75.844 170.667 170.667zM872.311 568.798v75.844h-341.333v37.956h341.333v75.844h-341.333v37.956h341.333v75.844h-341.333v37.956h341.333c0 41.711-34.133 75.844-75.844 75.844h-568.866c-41.711 0-75.844-34.133-75.844-75.844v-379.221c0-41.711 34.133-75.844 75.844-75.844h568.866c41.711 0 75.844 34.133 75.844 75.844h-341.333v37.956l341.333-0.137z"></path>
            </svg>
        </div>
        <div class="tray-login-screens" id="identify">
            <form id="form-identify">
                <h1 class="tray-title">Identifique-se</h1>
                <span class="tray-general-error-alert" custom-text="general-error-alert"></span>
                <div class="tray-input-group">
                    <input type="hidden" data-element="tray-session" name="session_id">
                    <input type="hidden" data-element="tray-store" name="store_id">
                    <input class="tray-input tray-input-invalid empty" type="text" name="identify" id="input-identify" placeholder="E-mail ou CPF/CNPJ (números)" required="">
                    <label for="input-identify" id="label-identify" class="tray-label">
                        <svg class="tray-icon-mail" viewBox="0 0 1024 1024">
                            <path class="path1" d="M989.252 147.388h-954.573c-19.183 0-34.748 15.565-34.748 34.748v675.021c0 19.183 15.565 34.748 34.748 34.748h954.573c19.183 0 34.748-15.565 34.748-34.748v-675.021c-0.068-19.183-15.565-34.748-34.748-34.748zM954.505 822.409h-885.077v-605.525h885.077v605.525z"></path>
                            <path class="path2" d="M160.427 380.45l333.346 205.414c5.598 3.413 11.878 5.188 18.227 5.188s12.629-1.707 18.227-5.188l333.346-205.414c16.316-10.035 21.436-31.471 11.332-47.787-10.035-16.316-31.471-21.436-47.787-11.332l-315.119 194.15-315.119-194.15c-16.316-10.035-37.683-4.983-47.787 11.332s-5.052 37.683 11.332 47.787z"></path>
                        </svg>
                        <svg class="tray-icon-document" viewBox="0 0 1024 1024" display="none">
                            <path class="path1" d="M989.321 139.742h-954.641c-19.183 0-34.679 15.565-34.679 34.748v675.021c0 19.183 15.565 34.748 34.748 34.748h954.573c19.183 0 34.748-15.565 34.748-34.748v-675.021c-0.068-19.251-15.565-34.748-34.748-34.748zM954.641 814.694h-885.146v-605.525h885.077v605.525z"></path>
                            <path class="path2" d="M989.321 139.742v-2.526h-954.641c-20.617 0-37.274 16.725-37.274 37.274v675.021c0 20.548 16.725 37.274 37.274 37.274h954.573c20.548 0 37.274-16.725 37.274-37.274v-675.021c-0.068-20.617-16.725-37.274-37.274-37.274v5.052c17.818 0 32.222 14.336 32.222 32.222v675.021c0 17.749-14.404 32.154-32.222 32.222h-954.573c-17.818 0-32.154-14.404-32.222-32.222v-675.021c0-17.749 14.404-32.154 32.222-32.222h954.573v-2.526zM954.641 814.694v-2.526h-882.551v-600.474h880.026v602.999h5.052v-608.051h-890.197v610.577h890.129v-2.526h-2.458z"></path>
                            <path class="path3" d="M666.692 348.638l-7.1 9.83h-527.497l-7.1-9.83v-18.5l7.1-9.83h527.497l7.1 9.83z"></path>
                            <path class="path4" d="M666.692 348.638l-2.048-1.502-6.281 8.806h-524.971l-5.803-8.124v-16.862l5.803-8.124h524.971l5.803 8.124v17.681h5.12v-19.319l-7.578-10.513-0.819-1.024h-530.022l-7.919 10.854-0.478 0.683v20.139l7.578 10.513 0.819 1.024h530.022l7.919-10.854 0.478-0.683v-0.819z"></path>
                            <path class="path5" d="M604.297 688.469c0 7.578-4.437 13.79-9.83 13.79h-459.503c-5.461 0-9.83-6.144-9.83-13.79v-21.026c0-7.578 4.437-13.79 9.83-13.79h459.503c5.461 0 9.83 6.144 9.83 13.79v21.026z"></path>
                            <path class="path6" d="M604.297 688.469h-2.594c0 6.758-4.028 11.264-7.305 11.264h-459.435c-3.345 0-7.305-4.437-7.305-11.264v-21.026c0-6.758 4.028-11.264 7.305-11.264h459.503c3.345 0 7.305 4.437 7.305 11.264v21.026h5.052v-21.026c0-8.465-4.779-16.111-12.356-16.316h-459.503c-7.509 0.205-12.356 7.919-12.356 16.316v21.026c0 8.465 4.779 16.111 12.356 16.316h459.503c7.509-0.205 12.356-7.919 12.356-16.316h-2.526z"></path>
                            <path class="path7" d="M882.074 688.469c0 7.578-5.052 13.79-11.332 13.79h-216.951c-6.281 0-11.332-6.144-11.332-13.79v-21.026c0-7.578 5.052-13.79 11.332-13.79h216.951c6.281 0 11.332 6.144 11.332 13.79v21.026z"></path>
                            <path class="path8" d="M882.074 688.469h-2.526c0 6.554-4.369 11.264-8.806 11.264h-216.951c-4.506 0-8.806-4.642-8.806-11.264v-21.026c0-6.554 4.369-11.264 8.806-11.264h216.951c4.506 0 8.806 4.642 8.806 11.264v21.026h5.052v-21.026c0-8.67-5.803-16.247-13.858-16.316h-216.951c-8.124 0.068-13.858 7.714-13.926 16.316v21.026c0 8.67 5.803 16.247 13.858 16.316h216.951c8.124-0.068 13.858-7.714 13.858-16.316h-2.458z"></path>
                            <path class="path9" d="M527.838 452.813l-5.325 9.83h-392.192l-5.325-9.83v-18.5l5.325-9.83h392.192l5.188 9.83z"></path>
                            <path class="path10" d="M527.838 452.813l-2.253-1.161-4.574 8.465h-389.188l-4.301-7.919v-17.271l4.301-7.919h389.12l4.233 7.919 0.068 17.886h5.12l-0.068-18.5-0.068-0.614-5.53-10.377-0.683-1.365h-395.264l-5.939 11.196-0.341 0.546v19.729l5.598 10.377 0.683 1.365h395.332l5.939-11.196 0.341-0.546v-0.614z"></path>
                        </svg>
                    </label>
                    <svg class="tray-icon-checked" viewBox="0 0 1024 1024">
                        <path class="path1" d="M1013.897 237.568l-114.142-114.142c-13.517-13.517-35.43-13.517-48.947 0l-475.409 475.409-202.206-202.206c-13.517-13.517-35.43-13.517-48.879 0l-114.142 114.142c-13.517 13.517-13.517 35.43 0 48.947l340.787 340.787c6.758 6.758 15.633 10.103 24.439 10.103 8.875 0 17.681-3.345 24.439-10.103l613.99-614.059c6.485-6.485 10.103-15.292 10.103-24.439 0.068-9.148-3.55-17.954-10.035-24.439z"></path>
                    </svg>
                    <p class="tray-error-message" id="message-identify"></p>
                </div>
                <div class="tray-actions">
                    <button class="tray-btn-primary" id="tray-login-identify" type="submit">Continuar</button>
                    <button class="tray-btn-facebook" data-element="tray-login-facebook">facebook</button>
                </div>
            </form>
        </div>
        <div class="tray-login-screens" id="main">
            <h1 class="tray-title">Autenticação</h1>
            <span class="tray-general-error-alert" custom-text="general-error-alert"></span>
            <p class="tray-error-message" id="message-main"></p>
            <p class="tray-action" custom-text="main-action">Escolha uma das opções para se identificar:</p>
            <div class="tray-actions">
                <button class="tray-btn-primary" id="tray-login-email">E-mail e senha da loja</button>
                <button class="tray-btn-otp" id="tray-login-otp">Receber código de segurança por e-mail</button>
                <button class="tray-btn-facebook" data-element="tray-login-facebook">facebook</button>
                <button class="tray-btn-default tray-btn-hidden" data-element="login-other-option">Voltar</button>
            </div>
        </div>
        <div class="tray-login-screens" id="otp">
            <form id="form-otp">
                <h1 class="tray-title">Código de Segurança</h1>
                <p class="tray-action">Informe o código de segurança que enviamos para seu e-mail.</p>
                <div class="tray-well" data-element="tray-email"></div>
                <div class="tray-input-group">
                    <input type="hidden" data-element="tray-session" name="session_id">
                    <input type="hidden" id="otp-input-store" data-element="tray-store" name="store_id">
                    <input type="hidden" id="input-email" name="email">
                    <input class="tray-input empty" autocomplete="off" type="tel" name="code" id="input-code" required="">
                    <label for="input-code" class="tray-label">
                        <svg class="tray-icon-locked" viewBox="0 0 1024 1024">
                            <path class="path1" d="M796.467 417.109v-132.642c0-155.58-128.956-284.467-284.467-284.467s-284.467 128.887-284.467 284.467v132.642c-64.444 0-113.801 49.289-113.801 113.801v379.29c0.068 64.444 49.289 113.801 113.801 113.801h568.866c64.444 0 113.801-49.289 113.801-113.801v-379.29c0.068-60.689-49.289-113.801-113.732-113.801zM265.489 284.399c0-136.533 109.978-246.511 246.511-246.511s246.511 109.978 246.511 246.511v132.71h-37.956v-132.71c0-113.801-94.822-208.623-208.623-208.623s-208.555 94.822-208.555 208.623v132.71h-37.956l0.068-132.71zM682.667 284.399v132.71h-341.333v-132.71c0-94.822 75.844-170.667 170.667-170.667s170.667 75.844 170.667 170.667zM872.311 568.798v75.844h-341.333v37.956h341.333v75.844h-341.333v37.956h341.333v75.844h-341.333v37.956h341.333c0 41.711-34.133 75.844-75.844 75.844h-568.866c-41.711 0-75.844-34.133-75.844-75.844v-379.221c0-41.711 34.133-75.844 75.844-75.844h568.866c41.711 0 75.844 34.133 75.844 75.844h-341.333v37.956l341.333-0.137z"></path>
                        </svg>
                        Código de segurança
                    </label>
                    <p class="tray-error-message"></p>
                </div>
                <div class="tray-actions">
                    <button class="tray-btn-primary" id="otp-submit">Continuar</button>
                    <button class="tray-btn-default" data-element="login-other-option">Escolher outra opção</button>
                </div>
            </form>
        </div>
        <div class="tray-login-screens" id="email-password">
            <form id="form-password">
                <h1 class="tray-title">E-mail e senha da loja</h1>
                <p class="tray-action">Informe sua senha.</p>
                <div class="tray-well" data-element="tray-email"></div>
                <div class="tray-well" data-element="tray-cpf"></div>
                <div class="tray-well" data-element="tray-cnpj"></div>
                <div class="tray-input-group tray-vspace-lg">
                    <input type="hidden" data-element="tray-session" name="session_id">
                    <input type="hidden" data-element="tray-store" name="store_id">
                    <input type="hidden" data-element="tray-email" name="email">
                    <input type="hidden" data-element="tray-cpf" name="cpf">
                    <input type="hidden" data-element="tray-cnpj" name="cnpj">
                    <button class="tray-login-hide-password" type="button" id="hide-password" data-text-toggle="Mostrar">Ocultar</button>
                    <input class="tray-input empty" autocomplete="off" type="text" name="password" id="input-password" required="">
                    <label for="input-password" class="tray-label">
                        <svg class="tray-icon-locked" viewBox="0 0 1024 1024">
                            <path class="path1" d="M796.467 417.109v-132.642c0-155.58-128.956-284.467-284.467-284.467s-284.467 128.887-284.467 284.467v132.642c-64.444 0-113.801 49.289-113.801 113.801v379.29c0.068 64.444 49.289 113.801 113.801 113.801h568.866c64.444 0 113.801-49.289 113.801-113.801v-379.29c0.068-60.689-49.289-113.801-113.732-113.801zM265.489 284.399c0-136.533 109.978-246.511 246.511-246.511s246.511 109.978 246.511 246.511v132.71h-37.956v-132.71c0-113.801-94.822-208.623-208.623-208.623s-208.555 94.822-208.555 208.623v132.71h-37.956l0.068-132.71zM682.667 284.399v132.71h-341.333v-132.71c0-94.822 75.844-170.667 170.667-170.667s170.667 75.844 170.667 170.667zM872.311 568.798v75.844h-341.333v37.956h341.333v75.844h-341.333v37.956h341.333v75.844h-341.333v37.956h341.333c0 41.711-34.133 75.844-75.844 75.844h-568.866c-41.711 0-75.844-34.133-75.844-75.844v-379.221c0-41.711 34.133-75.844 75.844-75.844h568.866c41.711 0 75.844 34.133 75.844 75.844h-341.333v37.956l341.333-0.137z"></path>
                        </svg>
                        Senha
                    </label>
                    <p class="tray-error-message"></p>
                </div>
                <div class="tray-actions">
                    <button class="tray-btn-primary" type="submit" id="password-submit">Continuar</button>
                    <button class="tray-btn-default" type="button" id="password-recovery">Esqueci ou não tenho senha</button>
                    <button class="tray-btn-default" data-element="login-other-option">Escolher outra opção</button>
                </div>
            </form>
        </div>
    </div>
</template>

<script>/* Zepto 1.1.7 - zepto event ajax form ie - zeptojs.com/license */
var Zepto=function(){function D(t){return null==t?String(t):j[T.call(t)]||"object"}function Z(t){return"function"==D(t)}function L(t){return null!=t&&t==t.window}function $(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function _(t){return"object"==D(t)}function k(t){return _(t)&&!L(t)&&Object.getPrototypeOf(t)==Object.prototype}function M(t){var e=!!t&&"length"in t&&t.length,r=n.type(t);return"function"!=r&&!L(t)&&("array"==r||0===e||"number"==typeof e&&e>0&&e-1 in t)}function R(t){return s.call(t,function(t){return null!=t})}function z(t){return t.length>0?n.fn.concat.apply([],t):t}function F(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function q(t){return t in f?f[t]:f[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function H(t,e){return"number"!=typeof e||c[F(t)]?e:e+"px"}function V(t){var e,n;return u[t]||(e=a.createElement(t),a.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),u[t]=n),u[t]}function I(t){return"children"in t?o.call(t.children):n.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function B(n,r,i){for(e in r)i&&(k(r[e])||A(r[e]))?(k(r[e])&&!k(n[e])&&(n[e]={}),A(r[e])&&!A(n[e])&&(n[e]=[]),B(n[e],r[e],i)):r[e]!==t&&(n[e]=r[e])}function U(t,e){return null==e?n(t):n(t).filter(e)}function X(t,e,n,r){return Z(e)?e.call(t,n,r):e}function J(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function W(e,n){var r=e.className||"",i=r&&r.baseVal!==t;return n===t?i?r.baseVal:r:void(i?r.baseVal=n:e.className=n)}function Y(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?n.parseJSON(t):t):t}catch(e){return t}}function G(t,e){e(t);for(var n=0,r=t.childNodes.length;r>n;n++)G(t.childNodes[n],e)}var t,e,n,r,C,N,i=[],o=i.slice,s=i.filter,a=window.document,u={},f={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},l=/^\s*<(\w+|!)[^>]*>/,h=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,d=/^(?:body|html)$/i,m=/([A-Z])/g,g=["val","css","html","text","data","width","height","offset"],v=["after","prepend","before","append"],y=a.createElement("table"),x=a.createElement("tr"),b={tr:a.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:x,th:x,"*":a.createElement("div")},w=/complete|loaded|interactive/,E=/^[\w-]*$/,j={},T=j.toString,S={},O=a.createElement("div"),P={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},A=Array.isArray||function(t){return t instanceof Array};return S.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,o=!i;return o&&(i=O).appendChild(t),r=~S.qsa(i,e).indexOf(t),o&&O.removeChild(t),r},C=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},N=function(t){return s.call(t,function(e,n){return t.indexOf(e)==n})},S.fragment=function(e,r,i){var s,u,f;return h.test(e)&&(s=n(a.createElement(RegExp.$1))),s||(e.replace&&(e=e.replace(p,"<$1></$2>")),r===t&&(r=l.test(e)&&RegExp.$1),r in b||(r="*"),f=b[r],f.innerHTML=""+e,s=n.each(o.call(f.childNodes),function(){f.removeChild(this)})),k(i)&&(u=n(s),n.each(i,function(t,e){g.indexOf(t)>-1?u[t](e):u.attr(t,e)})),s},S.Z=function(t,e){return t=t||[],t.__proto__=n.fn,t.selector=e||"",t},S.isZ=function(t){return t instanceof S.Z},S.init=function(e,r){var i;if(!e)return S.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&l.test(e))i=S.fragment(e,RegExp.$1,r),e=null;else{if(r!==t)return n(r).find(e);i=S.qsa(a,e)}else{if(Z(e))return n(a).ready(e);if(S.isZ(e))return e;if(A(e))i=R(e);else if(_(e))i=[e],e=null;else if(l.test(e))i=S.fragment(e.trim(),RegExp.$1,r),e=null;else{if(r!==t)return n(r).find(e);i=S.qsa(a,e)}}return S.Z(i,e)},n=function(t,e){return S.init(t,e)},n.extend=function(t){var e,n=o.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){B(t,n,e)}),t},S.qsa=function(t,e){var n,r="#"==e[0],i=!r&&"."==e[0],s=r||i?e.slice(1):e,a=E.test(s);return $(t)&&a&&r?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:o.call(a&&!r?i?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=a.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},n.type=D,n.isFunction=Z,n.isWindow=L,n.isArray=A,n.isPlainObject=k,n.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},n.inArray=function(t,e,n){return i.indexOf.call(e,t,n)},n.camelCase=C,n.trim=function(t){return null==t?"":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.map=function(t,e){var n,i,o,r=[];if(M(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&r.push(n);else for(o in t)n=e(t[o],o),null!=n&&r.push(n);return z(r)},n.each=function(t,e){var n,r;if(M(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(r in t)if(e.call(t[r],r,t[r])===!1)return t;return t},n.grep=function(t,e){return s.call(t,e)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){j["[object "+e+"]"]=e.toLowerCase()}),n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,indexOf:i.indexOf,concat:i.concat,map:function(t){return n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(o.apply(this,arguments))},ready:function(t){return w.test(a.readyState)&&a.body?t(n):a.addEventListener("DOMContentLoaded",function(){t(n)},!1),this},get:function(e){return e===t?o.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return i.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return Z(t)?this.not(this.not(t)):n(s.call(this,function(e){return S.matches(e,t)}))},add:function(t,e){return n(N(this.concat(n(t,e))))},is:function(t){return this.length>0&&S.matches(this[0],t)},not:function(e){var r=[];if(Z(e)&&e.call!==t)this.each(function(t){e.call(this,t)||r.push(this)});else{var i="string"==typeof e?this.filter(e):M(e)&&Z(e.item)?o.call(e):n(e);this.forEach(function(t){i.indexOf(t)<0&&r.push(t)})}return n(r)},has:function(t){return this.filter(function(){return _(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!_(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!_(t)?t:n(t)},find:function(t){var e,r=this;return e=t?"object"==typeof t?n(t).filter(function(){var t=this;return i.some.call(r,function(e){return n.contains(e,t)})}):1==this.length?n(S.qsa(this[0],t)):this.map(function(){return S.qsa(this,t)}):n()},closest:function(t,e){var r=[],i="object"==typeof t&&n(t);return this.each(function(n,o){for(;o&&!(i?i.indexOf(o)>=0:S.matches(o,t));)o=o!==e&&!$(o)&&o.parentNode;o&&r.indexOf(o)<0&&r.push(o)}),n(r)},parents:function(t){for(var e=[],r=this;r.length>0;)r=n.map(r,function(t){return(t=t.parentNode)&&!$(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return U(e,t)},parent:function(t){return U(N(this.pluck("parentNode")),t)},children:function(t){return U(this.map(function(){return I(this)}),t)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(t){return U(this.map(function(t,e){return s.call(I(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=V(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=Z(t);if(this[0]&&!e)var r=n(t).get(0),i=r.parentNode||this.length>1;return this.each(function(o){n(this).wrapAll(e?t.call(this,o):i?r.cloneNode(!0):r)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var e;(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=Z(t);return this.each(function(r){var i=n(this),o=i.contents(),s=e?t.call(this,r):t;o.length?o.wrapAll(s):i.append(s)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var r=n(this);(e===t?"none"==r.css("display"):e)?r.show():r.hide()})},prev:function(t){return n(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return n(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var r=this.innerHTML;n(this).empty().append(X(this,t,e,r))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var n=X(this,t,e,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this.pluck("textContent").join(""):null},attr:function(n,r){var i;return"string"!=typeof n||1 in arguments?this.each(function(t){if(1===this.nodeType)if(_(n))for(e in n)J(this,e,n[e]);else J(this,n,X(this,r,t,this.getAttribute(n)))}):this.length&&1===this[0].nodeType?!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:t},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){J(this,t)},this)})},prop:function(t,e){return t=P[t]||t,1 in arguments?this.each(function(n){this[t]=X(this,e,n,this[t])}):this[0]&&this[0][t]},data:function(e,n){var r="data-"+e.replace(m,"-$1").toLowerCase(),i=1 in arguments?this.attr(r,n):this.attr(r);return null!==i?Y(i):t},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=X(this,t,e,this.value)})):this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var r=n(this),i=X(this,t,e,r.offset()),o=r.offsetParent().offset(),s={top:i.top-o.top,left:i.left-o.left};"static"==r.css("position")&&(s.position="relative"),r.css(s)});if(!this.length)return null;if(a.documentElement!==this[0]&&!n.contains(a.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,r){if(arguments.length<2){var i=this[0];if("string"==typeof t){if(!i)return;return i.style[C(t)]||getComputedStyle(i,"").getPropertyValue(t)}if(A(t)){if(!i)return;var o={},s=getComputedStyle(i,"");return n.each(t,function(t,e){o[e]=i.style[C(e)]||s.getPropertyValue(e)}),o}}var a="";if("string"==D(t))r||0===r?a=F(t)+":"+H(t,r):this.each(function(){this.style.removeProperty(F(t))});else for(e in t)t[e]||0===t[e]?a+=F(e)+":"+H(e,t[e])+";":this.each(function(){this.style.removeProperty(F(e))});return this.each(function(){this.style.cssText+=";"+a})},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?i.some.call(this,function(t){return this.test(W(t))},q(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){r=[];var i=W(this),o=X(this,t,e,i);o.split(/\s+/g).forEach(function(t){n(this).hasClass(t)||r.push(t)},this),r.length&&W(this,i+(i?" ":"")+r.join(" "))}}):this},removeClass:function(e){return this.each(function(n){if("className"in this){if(e===t)return W(this,"");r=W(this),X(this,e,n,r).split(/\s+/g).forEach(function(t){r=r.replace(q(t)," ")}),W(this,r.trim())}})},toggleClass:function(e,r){return e?this.each(function(i){var o=n(this),s=X(this,e,i,W(this));s.split(/\s+/g).forEach(function(e){(r===t?!o.hasClass(e):r)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var n="scrollTop"in this[0];return e===t?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var n="scrollLeft"in this[0];return e===t?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),r=this.offset(),i=d.test(e[0].nodeName)?{top:0,left:0}:e.offset();return r.top-=parseFloat(n(t).css("margin-top"))||0,r.left-=parseFloat(n(t).css("margin-left"))||0,i.top+=parseFloat(n(e[0]).css("border-top-width"))||0,i.left+=parseFloat(n(e[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||a.body;t&&!d.test(t.nodeName)&&"static"==n(t).css("position");)t=t.offsetParent;return t})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(e){var r=e.replace(/./,function(t){return t[0].toUpperCase()});n.fn[e]=function(i){var o,s=this[0];return i===t?L(s)?s["inner"+r]:$(s)?s.documentElement["scroll"+r]:(o=this.offset())&&o[e]:this.each(function(t){s=n(this),s.css(e,X(this,i,t,s[e]()))})}}),v.forEach(function(e,r){var i=r%2;n.fn[e]=function(){var e,s,o=n.map(arguments,function(r){var i=[];return e=D(r),"array"==e?(r.forEach(function(e){return e.nodeType!==t?i.push(e):n.zepto.isZ(e)?i=i.concat(e.get()):void(i=i.concat(S.fragment(e)))}),i):"object"==e||null==r?r:S.fragment(r)}),u=this.length>1;return o.length<1?this:this.each(function(t,e){s=i?e:e.parentNode,e=0==r?e.nextSibling:1==r?e.firstChild:2==r?e:null;var f=n.contains(a.documentElement,s);o.forEach(function(t){if(u)t=t.cloneNode(!0);else if(!s)return n(t).remove();s.insertBefore(t,e),f&&G(t,function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var e=t.ownerDocument?t.ownerDocument.defaultView:window;e.eval.call(e,t.innerHTML)}})})})},n.fn[i?e+"To":"insert"+(r?"Before":"After")]=function(t){return n(t)[e](this),this}}),S.Z.prototype=n.fn,S.uniq=N,S.deserializeValue=Y,n.zepto=S,n}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function l(t){return t._zid||(t._zid=e++)}function h(t,e,n,r){if(e=p(e),e.ns)var i=d(e.ns);return(s[l(t)]||[]).filter(function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||i.test(t.ns))&&(!n||l(t.fn)===l(n))&&(!r||t.sel==r)})}function p(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function d(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function m(t,e){return t.del&&!u&&t.e in f||!!e}function g(t){return c[t]||u&&f[t]||t}function v(e,r,i,o,a,u,f){var h=l(e),d=s[h]||(s[h]=[]);r.split(/\s/).forEach(function(r){if("ready"==r)return t(document).ready(i);var s=p(r);s.fn=i,s.sel=a,s.e in c&&(i=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?s.fn.apply(this,arguments):void 0}),s.del=u;var l=u||i;s.proxy=function(t){if(t=j(t),!t.isImmediatePropagationStopped()){t.data=o;var r=l.apply(e,t._args==n?[t]:[t].concat(t._args));return r===!1&&(t.preventDefault(),t.stopPropagation()),r}},s.i=d.length,d.push(s),"addEventListener"in e&&e.addEventListener(g(s.e),s.proxy,m(s,f))})}function y(t,e,n,r,i){var o=l(t);(e||"").split(/\s/).forEach(function(e){h(t,e,n,r).forEach(function(e){delete s[o][e.i],"removeEventListener"in t&&t.removeEventListener(g(e.e),e.proxy,m(e,i))})})}function j(e,r){return(r||!e.isDefaultPrevented)&&(r||(r=e),t.each(E,function(t,n){var i=r[t];e[t]=function(){return this[n]=x,i&&i.apply(r,arguments)},e[n]=b}),e.timeStamp||(e.timeStamp=Date.now()),(r.defaultPrevented!==n?r.defaultPrevented:"returnValue"in r?r.returnValue===!1:r.getPreventDefault&&r.getPreventDefault())&&(e.isDefaultPrevented=x)),e}function T(t){var e,r={originalEvent:t};for(e in t)w.test(e)||t[e]===n||(r[e]=t[e]);return j(r,t)}var n,e=1,r=Array.prototype.slice,i=t.isFunction,o=function(t){return"string"==typeof t},s={},a={},u="onfocusin"in window,f={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};a.click=a.mousedown=a.mouseup=a.mousemove="MouseEvents",t.event={add:v,remove:y},t.proxy=function(e,n){var s=2 in arguments&&r.call(arguments,2);if(i(e)){var a=function(){return e.apply(n,s?s.concat(r.call(arguments)):arguments)};return a._zid=l(e),a}if(o(n))return s?(s.unshift(e[n],e),t.proxy.apply(null,s)):t.proxy(e[n],e);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var x=function(){return!0},b=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,s,a,u,f){var c,l,h=this;return e&&!o(e)?(t.each(e,function(t,e){h.on(t,s,a,e,f)}),h):(o(s)||i(u)||u===!1||(u=a,a=s,s=n),(u===n||a===!1)&&(u=a,a=n),u===!1&&(u=b),h.each(function(n,i){f&&(c=function(t){return y(i,t.type,u),u.apply(this,arguments)}),s&&(l=function(e){var n,o=t(e.target).closest(s,i).get(0);return o&&o!==i?(n=t.extend(T(e),{currentTarget:o,liveFired:i}),(c||u).apply(o,[n].concat(r.call(arguments,1)))):void 0}),v(i,e,u,a,s,l||c)}))},t.fn.off=function(e,r,s){var a=this;return e&&!o(e)?(t.each(e,function(t,e){a.off(t,r,e)}),a):(o(r)||i(s)||s===!1||(s=r,r=n),s===!1&&(s=b),a.each(function(){y(this,e,s,r)}))},t.fn.trigger=function(e,n){return e=o(e)||t.isPlainObject(e)?t.Event(e):j(e),e._args=n,this.each(function(){e.type in f&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var r,i;return this.each(function(s,a){r=T(o(e)?t.Event(e):e),r._args=n,r.target=a,t.each(h(a,e.type||e),function(t,e){return i=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){o(t)||(e=t,t=e.type);var n=document.createEvent(a[t]||"Events"),r=!0;if(e)for(var i in e)"bubbles"==i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),j(n)}}(Zepto),function(t){function h(e,n,r){var i=t.Event(n);return t(e).trigger(i,r),!i.isDefaultPrevented()}function p(t,e,r,i){return t.global?h(e||n,r,i):void 0}function d(e){e.global&&0===t.active++&&p(e,null,"ajaxStart")}function m(e){e.global&&!--t.active&&p(e,null,"ajaxStop")}function g(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||p(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void p(e,n,"ajaxSend",[t,e])}function v(t,e,n,r){var i=n.context,o="success";n.success.call(i,t,o,e),r&&r.resolveWith(i,[t,o,e]),p(n,i,"ajaxSuccess",[e,n,t]),x(o,e,n)}function y(t,e,n,r,i){var o=r.context;r.error.call(o,n,e,t),i&&i.rejectWith(o,[n,e,t]),p(r,o,"ajaxError",[n,r,t||e]),x(e,n,r)}function x(t,e,n){var r=n.context;n.complete.call(r,e,t),p(n,r,"ajaxComplete",[e,n]),m(n)}function b(){}function w(t){return t&&(t=t.split(";",2)[0]),t&&(t==f?"html":t==u?"json":s.test(t)?"script":a.test(t)&&"xml")||"text"}function E(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function j(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=E(e.url,e.data),e.data=void 0)}function T(e,n,r,i){return t.isFunction(n)&&(i=r,r=n,n=void 0),t.isFunction(r)||(i=r,r=void 0),{url:e,data:n,success:r,dataType:i}}function C(e,n,r,i){var o,s=t.isArray(n),a=t.isPlainObject(n);t.each(n,function(n,u){o=t.type(u),i&&(n=r?i:i+"["+(a||"object"==o||"array"==o?n:"")+"]"),!i&&s?e.add(u.name,u.value):"array"==o||!r&&"object"==o?C(e,u,r,n):e.add(n,u)})}var r,i,e=+new Date,n=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,u="application/json",f="text/html",c=/^\s*$/,l=n.createElement("a");l.href=window.location.href,t.active=0,t.ajaxJSONP=function(r,i){if(!("type"in r))return t.ajax(r);var f,h,o=r.jsonpCallback,s=(t.isFunction(o)?o():o)||"Zepto"+e++,a=n.createElement("script"),u=window[s],c=function(e){t(a).triggerHandler("error",e||"abort")},l={abort:c};return i&&i.promise(l),t(a).on("load error",function(e,n){clearTimeout(h),t(a).off().remove(),"error"!=e.type&&f?v(f[0],l,r,i):y(null,n||"error",l,r,i),window[s]=u,f&&t.isFunction(u)&&u(f[0]),u=f=void 0}),g(l,r)===!1?(c("abort"),l):(window[s]=function(){f=arguments},a.src=r.url.replace(/\?(.+)=\?/,"?$1="+s),n.head.appendChild(a),r.timeout>0&&(h=setTimeout(function(){c("timeout")},r.timeout)),l)},t.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:f,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var a,u,o=t.extend({},e||{}),s=t.Deferred&&t.Deferred();for(r in t.ajaxSettings)void 0===o[r]&&(o[r]=t.ajaxSettings[r]);d(o),o.crossDomain||(a=n.createElement("a"),a.href=o.url,a.href=a.href,o.crossDomain=l.protocol+"//"+l.host!=a.protocol+"//"+a.host),o.url||(o.url=window.location.toString()),(u=o.url.indexOf("#"))>-1&&(o.url=o.url.slice(0,u)),j(o);var f=o.dataType,h=/\?.+=\?/.test(o.url);if(h&&(f="jsonp"),o.cache!==!1&&(e&&e.cache===!0||"script"!=f&&"jsonp"!=f)||(o.url=E(o.url,"_="+Date.now())),"jsonp"==f)return h||(o.url=E(o.url,o.jsonp?o.jsonp+"=?":o.jsonp===!1?"":"callback=?")),t.ajaxJSONP(o,s);var N,p=o.accepts[f],m={},x=function(t,e){m[t.toLowerCase()]=[t,e]},T=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:window.location.protocol,S=o.xhr(),C=S.setRequestHeader;if(s&&s.promise(S),o.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",p||"*/*"),(p=o.mimeType||p)&&(p.indexOf(",")>-1&&(p=p.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(p)),(o.contentType||o.contentType!==!1&&o.data&&"GET"!=o.type.toUpperCase())&&x("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(i in o.headers)x(i,o.headers[i]);if(S.setRequestHeader=x,S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=b,clearTimeout(N);var e,n=!1;if(S.status>=200&&S.status<300||304==S.status||0==S.status&&"file:"==T){if(f=f||w(o.mimeType||S.getResponseHeader("content-type")),"arraybuffer"==S.responseType||"blob"==S.responseType)e=S.response;else{e=S.responseText;try{"script"==f?(1,eval)(e):"xml"==f?e=S.responseXML:"json"==f&&(e=c.test(e)?null:t.parseJSON(e))}catch(r){n=r}if(n)return y(n,"parsererror",S,o,s)}v(e,S,o,s)}else y(S.statusText||null,S.status?"error":"abort",S,o,s)}},g(S,o)===!1)return S.abort(),y(null,"abort",S,o,s),S;var O="async"in o?o.async:!0;if(S.open(o.type,o.url,O,o.username,o.password),o.xhrFields)for(i in o.xhrFields)S[i]=o.xhrFields[i];for(i in m)C.apply(S,m[i]);return o.timeout>0&&(N=setTimeout(function(){S.onreadystatechange=b,S.abort(),y(null,"timeout",S,o,s)},o.timeout)),S.send(o.data?o.data:null),S},t.get=function(){return t.ajax(T.apply(null,arguments))},t.post=function(){var e=T.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=T.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,r){if(!this.length)return this;var a,i=this,s=e.split(/\s/),u=T(e,n,r),f=u.success;return s.length>1&&(u.url=s[0],a=s[1]),u.success=function(e){i.html(a?t("<div>").html(e.replace(o,"")).find(a):e),f&&f.apply(i,arguments)},t.ajax(u),this};var S=encodeURIComponent;t.param=function(e,n){var r=[];return r.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(S(e)+"="+S(n))},C(r,e,n),r.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var e,n,r=[],i=function(t){return t.forEach?t.forEach(i):void r.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(r,o){n=o.type,e=o.name,e&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(t(o).val())}),r},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t,e){try{return n(t,e)}catch(r){return null}}}}(Zepto);</script>
<script>!function e(n,r,t){function a(i,o){if(!r[i]){if(!n[i]){var f="function"==typeof require&&require;if(!o&&f)return f(i,!0);if(u)return u(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var s=r[i]={exports:{}};n[i][0].call(s.exports,function(e){var r=n[i][1][e];return a(r?r:e)},s,s.exports,e,n,r,t)}return r[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)a(t[i]);return a}({1:[function(e,n,r){"use strict";function t(e,n){for(var r=e.length-1;r>=0;r--)if(n(e[r]))return e[r]}Object.defineProperty(r,"__esModule",{value:!0});var a={between:function(e,n){return window.matchMedia("screen and (min-width: "+e+"px) and "+("(max-width: "+(n-1)+"px)"))},atLeast:function(e){return window.matchMedia("screen and (min-width: "+e+"px)")},atMost:function(e){return window.matchMedia("screen and (max-width: "+(e-1)+"px)")}},u=function(e,n){return{is:"number"==typeof n?a.between(e,n):a.atLeast(e),atLeast:a.atLeast(e),atMost:a.atMost(n||Number.MAX_VALUE)}},i=function(e){function n(e){var n=t(o,function(n){return n.name===e});if(!n)throw new Error("invalid breakpoint name");return n}if(!e)throw new Error("No breakpoints were defined!");var r=[],a=function(n){var a={name:n,value:e[n]};if(t(r,function(e){return e.value===a.value}))throw new Error("Breakpoint values must be unique.");r.push(a)};for(var i in e)a(i);var o=r.sort(function(e,n){return e.value>n.value}).map(function(e,n){if("string"!=typeof e.name)throw new Error("Invalid breakpoint name -- should be a string.");if("number"!=typeof e.value||e.value<0)throw new Error("Invalid breakpoint value for "+e.name+": "+e.value);var t={name:e.name};return 1===r.length?t.query=u(0,null):n===r.length-1?t.query=u(e.value,null):t.query=u(e.value,r[n+1].value),t}),f=[];return{breakpoints:r,is:function(e){return n(e).query.is.matches},atLeast:function(e){return n(e).query.atLeast.matches},atMost:function(e){return n(e).query.atMost.matches},current:function(){var e=t(o,function(e){return e.query.is.matches});return e?e.name:void 0},addChangeListener:function(e){var n=this;o.forEach(function(r){var t=function(){var t=n.current();t===r.name&&e(t)};f.push({original:e,created:t}),r.query.is.addListener(t)})},removeChangeListener:function(e){o.forEach(function(n){var r=t(f,function(n){return n.original===e});r&&(n.query.is.removeListener(r.created),f.splice(f.indexOf(r),1))})}}};"undefined"!=typeof window&&(window.Breakjs=i),r["default"]=i,n.exports=r["default"]},{}]},{},[1]);</script>
<script>!function(a){var b=["00000000000","11111111111","22222222222","33333333333","44444444444","55555555555","66666666666","77777777777","88888888888","99999999999","12345678909"],c=function(a){a=a.split("").map(function(a){return parseInt(a,10)});var b=a.length+1,c=a.map(function(a,c){return a*(b-c)}),d=c.reduce(function(a,b){return a+b})%11;return d<2?0:11-d},d={};d.format=function(a){return this.strip(a).replace(/^(\d{3})(\d{3})(\d{3})(\d{2})$/,"$1.$2.$3-$4")},d.strip=function(a){return(a||"").toString().replace(/[^\d]/g,"")},d.isValid=function(a){var d=this.strip(a);if(!d)return!1;if(11!==d.length)return!1;if(b.indexOf(d)>=0)return!1;var e=d.substr(0,9);return e+=c(e),e+=c(e),e.substr(-2)===d.substr(-2)},d.generate=function(a){for(var b="",d=0;d<9;d++)b+=Math.floor(9*Math.random());return b+=c(b),b+=c(b),a?this.format(b):b},a?module.exports=d:window.CPF=d}("undefined"!=typeof exports),function(a){var b=["00000000000000","11111111111111","22222222222222","33333333333333","44444444444444","55555555555555","66666666666666","77777777777777","88888888888888","99999999999999"],c=function(a){var b=2,c=a.split("").reduce(function(a,b){return[parseInt(b,10)].concat(a)},[]),d=c.reduce(function(a,c){return a+=c*b,b=9===b?2:b+1,a},0),e=d%11;return e<2?0:11-e},d={};d.format=function(a){return this.strip(a).replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5")},d.strip=function(a){return(a||"").toString().replace(/[^\d]/g,"")},d.isValid=function(a){var d=this.strip(a);if(!d)return!1;if(14!==d.length)return!1;if(b.indexOf(d)>=0)return!1;var e=d.substr(0,12);return e+=c(e),e+=c(e),e.substr(-2)===d.substr(-2)},d.generate=function(a){for(var b="",d=0;d<12;d++)b+=Math.floor(9*Math.random());return b+=c(b),b+=c(b),a?this.format(b):b},a?module.exports=d:window.CNPJ=d}("undefined"!=typeof exports);</script>
<script>var trayLoginProto = {},
    thisElement;

;(function($, window, document, undefined) {
    var thatDoc = document,
        thisDoc =  (thatDoc._currentScript || thatDoc.currentScript).ownerDocument,
        template = thisDoc.querySelector('template').content,
        screensSelectors = '#identify, #main, #otp, #email-password',
        currentScreen = {},
        titleSelectors = '#tray-login-email, #email-password .tray-title',
        loginMethods = [],
        data = {},
        messages = {},
        initialized = false,
        initializedPassLogin = false;

    trayLoginProto = Object.create(HTMLElement.prototype);

    /**
     * Executes when element was created
     */
    trayLoginProto.createdCallback = function() {
        var clone = thatDoc.importNode(template, true);
        this.appendChild(clone);
        this.initComponent();
    };

    /**
     * Executes when some attribute was changed
     */
    trayLoginProto.attributeChangedCallback = function() {
        thisElement.initComponent();
    };

    /**
     * Initialize the component
     */
    trayLoginProto.initComponent = function() {
        thisElement = this;
        this.setLoginMethods();
        this.addElements();
        this.setLoginCallback();
        this.preventDefaultMessages();
        this.setMessages();
        this.changeLabels();

        if (!initialized) {
            this.addListeners();
            initialized = true;
        }

        this.setData('email', this.getAttribute('data-email'));
        this.setData('cpf', this.getAttribute('data-cpf'));
        this.setData('cnpj', this.getAttribute('data-cnpj'));
        this.setData('store', this.getAttribute('data-store'));
        this.setData('session', this.getAttribute('data-session'));

        if (this.getData('email') || this.getData('cpf') || this.getData('cnpj')) {
            this.openScreen('main');
            this.checkStatus.methods.init();
        } else if(this.hasLoginMethod('identify')) {
            this.openScreen('identify');
            this.identify.methods.init();
        }

        this.bindValues('[data-element="tray-store"]', 'store');
        this.bindValues('[data-element="tray-session"]', 'session');
        this.handleCloseButton();
    };

    /**
     * Trigger a custom event
     * @param {string} eventName
     * @param {object} eventResponse
     * @param {string} eventType - options: success|error
     */
    trayLoginProto.triggerCustomEvent = function(eventName, eventResponse, eventType) {
        var event = new CustomEvent(eventName, {
            detail: {
                response: eventResponse,
                type: eventType,
            },
        });
        window.dispatchEvent(event);
    };

    /**
     * Set the available methods
     */
    trayLoginProto.setLoginMethods = function() {
        loginMethods = this.getAttribute('data-methods') || ['facebook', 'password', 'otp'];
    };

    /**
     * Set login callback
     */
    trayLoginProto.setLoginCallback = function() {
        this.setData('callback', this.getAttribute('data-callback'));
    };

    /**
     * Set store ID
     */
    trayLoginProto.setStoreId = function() {
        this.setData('store', this.getAttribute('store'));
    };

    /**
     * Check if a method is available
     * @param {string} method
     * @return {boolean}
     */
    trayLoginProto.hasLoginMethod = function(method) {
        return loginMethods.indexOf(method) > -1;
    };

    /**
     * Prevent Default Message
     */
    trayLoginProto.preventDefaultMessages = function() {
        $('input, select, textarea').on("invalid", function(e) {
            e.preventDefault();
        });
    };

    /**
     * Set messages
     */
    trayLoginProto.setMessages = function() {
        this.messages = $.parseJSON(this.getAttribute('data-texts'));
        this.applyMessages();
    };

    /**
     * Apply messages in the DOM
     */
    trayLoginProto.applyMessages = function() {
        for (var key in this.messages) {
            if (this.messages.hasOwnProperty(key)) {
                var elements = thatDoc.querySelectorAll('[custom-text="' + key + '"]');
                var message = this.messages[key];
                for (var i = elements.length - 1; i >= 0; i--) {
                    elements[i].innerHTML = this.messages[key];
                }
            }
        }
    };

    /**
     * Set a data
     * @param {string} key
     * @param {string} val
     */
    trayLoginProto.setData = function(key, val) {
        data[key] = val;
    };

    /**
     * Get a data
     * @param {string} key
     * @return {string} - Value of the array key
     */
    trayLoginProto.getData = function(key) {
        return data[key];
    };

    /**
     * Add event listeners
     */
    trayLoginProto.addListeners = function() {
        this.onCloseElement()
            .onPasswordLogin()
            .onOTPLogin()
            .onFacebookLogin()
            .onChooseOtherOption()
            .onPasswordRecovery()
            .onKeyUpCode()
            .onSubmitCode()
            .ajaxMiddleware();
    };

    /**
     * Ajax middleware loading
     * @return {object} trayLoginProto
     */
    trayLoginProto.ajaxMiddleware = function() {
        $(thatDoc).on('ajaxBeforeSend', function(e, xhr, options){
            thisElement.loading.classList.remove('tray-loading-hidden');
        });

        $(thatDoc).on('ajaxStop', function(e, xhr, options){
            thisElement.loading.classList.add('tray-loading-hidden');
        });

        return this;
    };

    /**
     * Cache elements in the DOM
     * @return {object} trayLoginProto
     */
    trayLoginProto.addElements = function() {
        this.formOTP = thatDoc.getElementById('form-otp');
        this.formPassword = thatDoc.getElementById('form-password');
        this.loading = thatDoc.getElementById('tray-login-loading');
        this.passwordButton = thatDoc.getElementById('tray-login-email');
        this.OTPButton = thatDoc.getElementById('tray-login-otp');
        this.passRecoveryButton = thatDoc.getElementById('password-recovery');
        this.$facebookButton = $(".tray-btn-facebook");
        this.$otherOptionButton = $('[data-element="login-other-option"]');
        this.handleElements();
        return this;
    };

    /**
     * Handle display and show buttons
     * @return {object} trayLoginProto
     */
    trayLoginProto.handleElements = function() {
        this.passwordButton.style.display = 'block';
        this.OTPButton.style.display = 'block';
        this.passRecoveryButton.style.display = 'block';
        this.$facebookButton.show();
        this.$otherOptionButton.show();

        if (!this.hasLoginMethod('password')) {
            this.passwordButton.style.display = 'none';
        }

        if (!this.hasLoginMethod('otp')) {
            this.OTPButton.style.display = 'none';
        }

        if (!this.hasLoginMethod('password')) {
            this.passRecoveryButton.style.display = 'none';
        }

        if (!this.hasLoginMethod('facebook')) {
            this.$facebookButton.hide();
        }

        if (!thisElement.hasLoginMethod('identify') && currentScreen == 'main') {
            this.$otherOptionButton.hide();
        }

        return this;
    },
    /**
     * Open a screen and close others
     * @return {object} trayLoginProto
     */
    trayLoginProto.openScreen = function(screenID) {
        currentScreen = screenID;
        $(thatDoc).trigger('tray-login#' + screenID);
        var screens = thatDoc.querySelectorAll(screensSelectors);

        for (var i = screens.length - 1; i >= 0; i--) {
            screens[i].style.display = 'none';
        }

        thatDoc.getElementById(screenID).style.display = 'block';
        this.handleElements();
        this.cleanErrorMessage();

        return this;
    };

    /**
     * Open a screen and close others
     * @return {object} trayLoginProto
     */
    trayLoginProto.handleCloseButton = function() {
        this.closeButton = thatDoc.querySelector('.tray-close');

        if (this.messages != null && this.messages.closeButton) {
            this.closeButton.style.display = 'none';
        }
    };
    /**
     * When click in the close button
     * @return {object} trayLoginProto
     */
    trayLoginProto.onCloseElement = function() {
        this.closeButton = thatDoc.querySelector('.tray-close');

        this.closeButton.addEventListener('click', function(event) {
            event.preventDefault();
            thisElement.style.display = 'none';
            $(document).trigger('tray-login#close');
        });

        return this;
    };

    /**
     * Listen the button that open the password's screen
     * @return {object} trayLoginProto
     */
    trayLoginProto.onPasswordLogin = function() {
        this.passwordButton.addEventListener('click', function(event) {
            event.preventDefault();
            thisElement.openScreen('email-password')
                .showEmails()
                .showCpfs()
                .showCnpjs()
                .onHidePassword();
            thisElement.byPassword.init();
            trayLoginProto.triggerCustomEvent('tray-login-click', 'tray-password-submit');
        });

        this.onPasswordSubmit();

        return this;
    };

    /**
     * Listen submit when is trying to login with e-mail and password
     */
    trayLoginProto.onPasswordSubmit = function() {
        this.formPassword.addEventListener('submit', function(event) {
            event.preventDefault();
            var data = $(thisElement.formPassword).serialize();
            var dataMethods = thisElement.hasLoginMethod('identify') ? '["facebook", "identify"]' : '["facebook"]';

            $.ajax({
                type: 'POST',
                url: thisElement.routes.methods.route('password'),
                data: data,
                dataType: 'json',
                success: function(response) {
                    if (response && response.statusCode > 400) {
                        thisElement.showErrorMessage(response);
                        trayLoginProto.triggerCustomEvent('tray-login', response, 'error');
                        return;
                    }

                    trayLoginProto.triggerCustomEvent('tray-login', response, 'success');
                    thisElement.redirectOnSuccess(response.data.token);
                },
                error: function(request, type) {
                    if(request.status < 404) {
                        thisElement.setAttribute('data-methods', dataMethods);
                    }

                    trayLoginProto.triggerCustomEvent('tray-login', request, 'error');
                    thisElement.showErrorMessage($.parseJSON(request.responseText));
                    console.error('Tray Login Error: ' + request.status + ' - ' + request.statusText);
                },
            });
        });
    };


    /**
     * Add/Update values in the DOM
     * @param {string} elementSelector
     * @param {string} data
     * @return {object} trayLoginProto
     *
     * @example
     * this.bindValues('[data-element="tray-store"]', 'store');
     * this.bindValues('[data-element="tray-email"]', 'email');
     */
    trayLoginProto.bindValues = function(elementSelector, data) {
        var elements = thatDoc.querySelectorAll(elementSelector);
        for (var i = elements.length - 1; i >= 0; i--) {
            var value = thisElement.getData(data);
            if (value) {
                elements[i].innerHTML = value;
                elements[i].value = value;
            } else {
                elements[i].style.display = 'none';
            }
        }

        return this;
    };

    /**
     * Show e-mails in the DOM
     * @return {object} trayLoginProto
     */
    trayLoginProto.showEmails = function() {
        var emails = thatDoc.querySelectorAll('[data-element="tray-email"]');
        for (var i = emails.length - 1; i >= 0; i--) {
            var email = thisElement.getData('email');
            if (email) {
                emails[i].innerHTML = email;
                emails[i].value = email;
                emails[i].style.display = 'block';
            } else {
                emails[i].style.display = 'none';
            }
        }
        return this;
    };

    /**
     * Show cpf in the DOM
     * @return {object} trayLoginProto
     */
    trayLoginProto.showCpfs = function() {
        var cpfs = thatDoc.querySelectorAll('[data-element="tray-cpf"]');
        for (var i = cpfs.length - 1; i >= 0; i--) {
            var cpf = thisElement.getData('cpf');
            if (cpf) {
                cpfs[i].innerHTML = cpf;
                cpfs[i].value = cpf;
                cpfs[i].style.display = 'block';
            } else {
                cpfs[i].style.display = 'none';
            }
        }
        return this;
    };

    /**
     * Show cnpj in the DOM
     * @return {object} trayLoginProto
     */
    trayLoginProto.showCnpjs = function() {
        var cnpjs = thatDoc.querySelectorAll('[data-element="tray-cnpj"]');
        for (var i = cnpjs.length - 1; i >= 0; i--) {
            var cnpj = thisElement.getData('cnpj');
            if (cnpj) {
                cnpjs[i].innerHTML = cnpj;
                cnpjs[i].value = cnpj;
                cnpjs[i].style.display = 'block';
            } else {
                cnpjs[i].style.display = 'none';
            }
        }
        return this;
    };

    /**
     * When user is typing the password
     * @return {object} trayLoginProto
     */
    trayLoginProto.onKeyUpPassword = function() {
        var inputPassword = thatDoc.getElementById('input-password');

        inputPassword.addEventListener('keyup', function(event) {
            if (this.value.length > 0) {
                thisElement.hidePasswordButton.style.display = 'block';
            } else {
                thisElement.hidePasswordButton.style.display = 'none';
            }
            thisElement.cleanErrorMessage();
        });

        return this;
    };

    /**
     * When clicks on the button "hide"
     * @return {object} trayLoginProto
     */
    trayLoginProto.onHidePassword = function() {
        if(initializedPassLogin) {
            return this;
        }
        initializedPassLogin = true;

        this.onKeyUpPassword();
        this.hidePasswordButton = thatDoc.getElementById('hide-password');
        var hideText = this.hidePasswordButton.innerHTML;
        var showText = this.hidePasswordButton.getAttribute('data-text-toggle');

        this.hidePasswordButton.addEventListener('click', function(event) {
            event.preventDefault();
            var inputPassword = thatDoc.getElementById('input-password');
            if (inputPassword.getAttribute('type') === 'text') {
                inputPassword.setAttribute('type', 'password');
                this.innerHTML = showText;
                return;
            }

            inputPassword.setAttribute('type', 'text');
            this.innerHTML = hideText;
        });

        return this;
    };

    /**
     * Try to login with OTP method
     * @return {object} trayLoginProto
     */
    trayLoginProto.onOTPLogin = function() {
        this.OTPButton.addEventListener('click', function(event) {
            event.preventDefault();
            thisElement.showEmails();
            thatDoc.getElementById('input-email').value = thisElement.getData('email');

            var data = {
                email: thisElement.getData('email'),
                cpf: thisElement.getData('cpf'),
                cnpj: thisElement.getData('cnpj'),
                store_id: thisElement.getData('store'),
                session_id: thisElement.getData('session'),
            };

            $.ajax({
                type: 'POST',
                url: thisElement.routes.methods.route('otp'),
                data: data,
                dataType: 'json',
                success: function(response) {
                    thisElement.openScreen('otp');
                },
                error: function(request, type) {
                    console.error('Tray Login Error: ' + request.status + ' - ' + request.statusText);
                },
                beforeSend: function(response)  {
                    trayLoginProto.triggerCustomEvent('tray-login-click', 'tray-random-code');
                }
            });
        });

        return this;
    };

    /**
     * Try to login with Facebook
     * @return {object} trayLoginProto
     */
    trayLoginProto.onFacebookLogin = function() {
        for (var i = this.$facebookButton.length - 1; i >= 0; i--) {
            this.$facebookButton[i].addEventListener('click', function(event) {
                event.preventDefault();

                var data = {
                    store_id: thisElement.getAttribute('data-store'),
                    session_id: thisElement.getAttribute('data-session'),
                    crossdm: encodeURIComponent(document.location.origin),
                    callback: thisElement.getAttribute('data-callback'),
                };

                $.get(thisElement.routes.methods.route('facebook'), data, function(response) {
                    if (!response.data.url) {
                        return false;
                    }

                    thatDoc.location = response.data.url;
                });
                trayLoginProto.triggerCustomEvent('tray-login-click', 'tray-login-facebook');
            });
        }

        return this;
    };

    /**
     * Back to other options
     * @return {object} trayLoginProto
     */
    trayLoginProto.onChooseOtherOption = function() {
        for (var i = this.$otherOptionButton.length - 1; i >= 0; i--) {
            this.$otherOptionButton[i].addEventListener('click', function(event) {
                event.preventDefault();
                if (thisElement.hasLoginMethod('identify') && currentScreen === 'main' || thisElement.checkStatus.blockedUser){
                        thisElement.openScreen('identify');
                        thisElement.removeAttribute('data-email');
                        thisElement.removeAttribute('data-cpf');
                        thisElement.removeAttribute('data-cnpj');

                        if(thisElement.checkStatus.blockedUser){
                            thisElement.checkStatus.methods.resetLogin();
                        }

                        return this;
                }
                thisElement.openScreen('main');
            });
        }

        return this;
    };

    /**
     * Listen click on password recovery
     */
    trayLoginProto.onPasswordRecovery = function() {
        this.passRecoveryButton.addEventListener('click', function(event) {
            event.preventDefault();

            var data = {
                email: trayLoginProto.getData('email'),
                cpf: trayLoginProto.getData('cpf'),
                cnpj: trayLoginProto.getData('cnpj'),
                store_id: trayLoginProto.getData('store'),
                session_id: trayLoginProto.getData('session'),
            };

            $.ajax({
                type: 'POST',
                url: thisElement.routes.methods.route('password_recovery'),
                data: data,
                dataType: 'json',
                success: function(response) {
                    if (response.statusCode > 400) {
                        thisElement.showErrorMessage(response);
                        return;
                    }

                    var message = thatDoc.querySelector('#form-password .tray-action');
                    message.innerHTML = response.data.message;

                    thatDoc.getElementById('input-password').focus();
                },
                error: function(request, type) {
                    thisElement.showErrorMessage(request);
                },
                beforeSend: function(response)  {
                    trayLoginProto.triggerCustomEvent('tray-login-click', 'tray-password-recover');
                },
            });
        });

        return this;
    };

    /**
     * Remove error elements when is typing
     * @return {object} trayLoginProto
     */
    trayLoginProto.onKeyUpCode = function() {
        this.inputCode = thatDoc.getElementById('input-code');
        this.inputCode.addEventListener('keyup', function() {
            thatDoc.querySelector('.tray-error-message').innerHTML = '';
            thatDoc.getElementById('input-code').classList.remove('tray-input-invalid');
        });

        return this;
    },

    /**
     * Event listener to the form submit
     * @return {object} trayLoginProto
     */
    trayLoginProto.onSubmitCode = function() {
        this.formOTP.addEventListener('submit', function(event) {
            event.preventDefault();

            var data = {
                email: thisElement.getData('email'),
                cpf: thisElement.getData('cpf'),
                cnpj: thisElement.getData('cnpj'),
                store_id: thisElement.getData('store'),
                session_id: thisElement.getData('session'),
                code: thatDoc.getElementById('input-code').value,
            };

            $.ajax({
                type: 'GET',
                data: data,
                url: thisElement.routes.methods.route('otp_login'),
                dataType: 'json',
                success: function(response) {
                    if (response.statusCode > 400) {
                        thisElement.showErrorMessage(response);
                        trayLoginProto.triggerCustomEvent('tray-login', response, 'error');
                        return;
                    }

                    trayLoginProto.triggerCustomEvent('tray-login', response, 'success');
                    thisElement.redirectOnSuccess(response.data.token);
                },
                error: function(request, type) {
                    thisElement.showErrorMessage($.parseJSON(request.responseText));
                    trayLoginProto.triggerCustomEvent('tray-login', request, 'error');
                }
            });
        });

        return this;
    };

    /**
     * Redirect to callback url
     * @param {string} token
     */
    trayLoginProto.redirectOnSuccess = function(token) {
        var redirectParam = '?token=' + token;
        var callback = thisElement.getAttribute('data-callback');

        if (!callback) {
            return;
        }

        if (callback.indexOf('?') > -1) {
            redirectParam = '&token=' + token;
        }

        window.location = callback + redirectParam;
    };

    /**
     * Show error messages to the user
     */
    trayLoginProto.showErrorMessage = function(response) {
        var errorElements = thatDoc.querySelectorAll('.tray-error-message');
        for (var i = errorElements.length - 1; i >= 0; i--) {
            errorElements[i].innerHTML = response.message;
        }

        thatDoc.getElementById('input-code').classList.add('tray-input-invalid');
        thatDoc.getElementById('input-password').classList.add('tray-input-invalid');
    };

    /**
     * Clean error messages to the user
     */
    trayLoginProto.cleanErrorMessage = function(response) {
        var errorElements = thatDoc.querySelectorAll('.tray-error-message');
        for (var i = errorElements.length - 1; i >= 0; i--) {
            errorElements[i].innerHTML = '';
        }

        thatDoc.getElementById('input-code').classList.remove('tray-input-invalid');
        thatDoc.getElementById('input-password').classList.remove('tray-input-invalid');
    };

    /**
     * Change email label if data-cpf exists
     */
    trayLoginProto.changeLabels = function() {
        if (this.getData('cpf')) {
            $(titleSelectors).text('CPF e senha da loja');
        } else if (this.getData('cnpj')) {
            $(titleSelectors).text('CNPJ e senha da loja');
        } else if(this.getData('email')) {
            $(titleSelectors).text('E-mail e senha da loja');
        }
    };

    /**
     * Register the element
     */
    window.trayLogin = thatDoc.registerElement('tray-login', {
        prototype: trayLoginProto
    });

})(Zepto, window, document);
</script>
<script>(function($, window, document) {

    /**
     * Routes
     * @example
     */
    var self;
    trayLoginProto.routes = self = {
        routes: {
            "has_account": "/checkout/has-account",
            "password": "/checkout/password",
            "password_recovery": "/checkout/password-recovery",
            "otp": "/checkout/otp-generate",
            "otp_login": "/checkout/otp",
            "facebook": "/checkout/facebook/url",
            "check_status": "/checkout/check-status"
        },

        /**
         * DOM Elements
         */
        elms: {},

        methods: {
            /**
             * Return route URL
             * @param {string} name - Route's name
             * @return {string|false} - Return route's URL or false
             */
            route: function(name) {
                if (!name) {
                    return false;
                }

                return self.routes[name];
            },

            /**
             * Add/update a named route
             * @param {string} name
             * @param {string} url
             */
            setRoute: function(name, url) {
                if (!name || !url) {
                    return false;
                }

                self.routes[name] = url;
            }
        },
    };

})(Zepto, window, document);
</script>
<script>(function($, window, document, _this) {

    /**
     * Login by password
     * @example trayLoginProto.byPassword.init();
     */
    trayLoginProto.byPassword = {
        layout: {},

        /**
         * Initialized once
         */
        initialized: false,

        /**
         * Init the module
         */
        init: function() {
            if (this.initialized) {
                return;
            }

            this.configureBreakPoints().changePasswordType();
            this.initialized = true;
        },

        /**
         * Set breakpoints to the vendor "Breakjs"
         */
        configureBreakPoints: function() {
            this.layout = Breakjs({
                mobile: 0,
                tablet: 768,
                desktop: 992
            });

            return this;
        },

        /**
         * Dispatch event that hides the password
         * if is desktop
         */
        changePasswordType: function() {
            if (this.layout.atLeast('desktop')) {
                document.getElementById('hide-password').dispatchEvent(new Event('click'));
            }

            return this;
        }
    };

})(Zepto, window, document, thisElement);
</script>
<script>(function($, window, document, _this) {
    'use strict';
    var self;
    /**
     * Identify
     */
    trayLoginProto.identify = self = {

        elms: {},

        classes: {
            empty: 'empty',
        },
        /**
         * Initialize once
         */
        initialized: false,

        methods: {
            /**
             * Init the module
             */
            init: function() {
                if (self.initialized) {
                    return;
                }

                $(document).trigger('tray-login#identify');
                self.initialized = true;

                this.setElements();
                self.events
                    .onIdentifyKeyUp()
                    .onIdentifyBlur()
                    .onIdentifySubmit();
            },

            /**
             * Set DOM Elements
             */
            setElements: function() {
                self.elms = {
                    identifyForm: document.getElementById('form-identify'),
                    identifyButton: document.getElementById('tray-login-identify'),
                    identifyInput: document.getElementById('input-identify'),
                    identifyLabel: document.getElementById('label-identify'),
                    identifyMessage: document.getElementById('message-identify'),
                };
            },

            /**
             * Check if input is valid and set them
             * @param {object} input DOM element
             * @return {boolean}
             */
            checkInput: function(input) {
                if (!input || !input.value) {
                    input.classList.add(self.classes.empty);
                    return false;
                }

                input.setCustomValidity('invalid');
                input.classList.remove(self.classes.empty);

                if (CPF.isValid(input.value) || CNPJ.isValid(input.value) || this.isValidEmail(input.value)) {
                    input.setCustomValidity('');
                    return true;
                }

                return false;
            },

            /**
             * Change label according input data
             * @param {string} email
             * @return {bool}
             */
            changeLabel: function(input){
                var regex = /^\d+$/;
                var emailLabel = self.elms.identifyLabel.children[0];
                var documentLabel = self.elms.identifyLabel.children[1];

                if (regex.test(input.value)) {
                    emailLabel.setAttribute('display','none');
                    documentLabel.setAttribute('display','block');
                    return;
                }

                emailLabel.setAttribute('display','block');
                documentLabel.setAttribute('display','none');
            },

            /**
             * Check if an email is valid
             * @param {string} email
             * @return {bool}
             */
            isValidEmail: function(email) {
                var regex = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return regex.test(email);
            },

            /**
             * Handle input validation/class/message
             * @param {object}|{boolean} options
             */
            handleValidation: function(options) {
                var input = options.input;
                var message = options.message;

                if (!input && !message) {
                    return false;
                }

                input.setCustomValidity(message);
                self.elms.identifyMessage.innerHTML = message;

                if (message) {
                    input.classList.add('tray-input-invalid');
                } else {
                    input.classList.remove('tray-input-invalid');
                }
            },

            /**
             * Returns login type
             * @param {string} user_input
             */
            getLoginType: function(user_input) {
                var type = 'cnpj';

                if (this.isValidEmail(user_input)) {
                    type = 'email';
                }

                if (user_input.length === 11) {
                    type = 'cpf';
                }

                return type;
            },

            /**
             * Check if an user has an account
             * @param {string} user_input
             */
            hasAccount: function(formData) {
                var userInput = self.elms.identifyInput.value;
                var dataType,
                    data,
                    type = this.getLoginType(userInput);

                dataType = 'data-' + type;
                data = formData + '&' + type + '=' + userInput;

                $.ajax({
                    type: 'GET',
                    url: thisElement.routes.methods.route('has_account'),
                    data: data,
                    dataType: 'json',
                    success: function(response){
                        if (response.data && response.data.hasAccount) {
                            thisElement.setAttribute(dataType, userInput);
                            return;
                        }

                        self.methods.handleValidation({
                            input: self.elms.identifyInput,
                            message: 'Usuário não encontrado, faça seu cadastro.',
                        });
                    },
                    error: function(xhr, type){
                        self.methods.handleValidation({
                            input: self.elms.identifyInput,
                            message: 'Não foi possível verificar seu cadastro, tente novamente.',
                        });
                    }
                });
            },
        },

        /**
         * Listeners
         */
        events: {
            /**
             * Listen form submit
             * @return {object} events
             */
            onIdentifySubmit: function() {
                self.elms.identifyForm.addEventListener('submit', function(event) {
                    event.preventDefault();
                    if (!self.methods.checkInput(self.elms.identifyInput)) {
                        self.methods.handleValidation({
                            input: self.elms.identifyInput,
                            message: 'Dados inválidos, digite novamente!',
                        });
                        return;
                    }

                    self.methods.hasAccount($(this).serialize());
                });

                return this;
            },

            /**
             * Listen input blur
             * @return {object} events
             */
            onIdentifyBlur: function() {
                self.elms.identifyInput.addEventListener('blur', function() {
                    if (!self.methods.checkInput(self.elms.identifyInput)) {
                        self.methods.handleValidation({
                            input: self.elms.identifyInput,
                            message: 'Dados inválidos, digite novamente!',
                        });
                    }
                });

                return this;
            },

            /**
             * Listen input keyup
             * @return {object} events
             */
            onIdentifyKeyUp: function() {
                self.elms.identifyInput.addEventListener('keyup', function(event) {
                    self.methods.changeLabel(this);
                    if (self.methods.checkInput(this) && event.keyCode !== 13) {
                        self.methods.handleValidation({
                            input: self.elms.identifyInput,
                            message: '',
                        });
                    }
                });

                return this;
            },
        },

    };

})(Zepto, window, document, thisElement);
</script>
<script>(function($, window, document, _this) {
    'use strict';
    var self;
    /**
     * checkStatus
     */
    trayLoginProto.checkStatus = self = {

        elms: {},

        /**
         * Initialize once
         */
        initialized: false,
        blockedUser: false,
        loginMethods: [],

        methods: {
            /**
             * Init the module
             */
            init: function() {
                if(!self.initialized){
                    this.setElements();
                    this.getLoginMethods();
                    self.initialized = true;
                }

                this.checkStatus();
            },

            /**
             * Set DOM elements
             */
            setElements: function() {
                self.elms = {
                    identifyInput: document.getElementById('input-identify'),
                };
            },

            /**
             * Get initial login methods for reset
             */
            getLoginMethods: function() {
                self.loginMethods = thisElement.getAttribute('data-methods');
            },

            /**
             * Check user input for mount data
             * @return {string} input
             */
            getUserInput: function() {
                var input = 'email';

                if (thisElement.getData('cpf')) {
                    input = 'cpf';
                }

                if (thisElement.getData('cnpj')) {
                    input = 'cnpj';
                }

                return input;
            },

            /**
             * Reset Login Methods
             */
            resetLogin: function() {
                thisElement.setAttribute('data-methods', self.loginMethods);
                thisElement.setAttribute('data-texts', JSON.stringify({
                    'general-error-alert': '',
                    'main-action': 'Escolha uma das opções para se identificar:'
                }));
                self.elms.identifyInput.setCustomValidity('invalid');
            },

            /**
             * Check Login
             * @param {string} user_input
             */
            checkStatus: function() {
                var storeId = thisElement.getData('store');
                var userInput = this.getUserInput();
                var data = 'store_id=' + storeId + '&' + userInput + '=' + thisElement.getData(userInput);
                var dataMethods = thisElement.hasLoginMethod('identify') ? '["facebook", "identify"]' : '["facebook"]';

                $.ajax({
                    type: 'GET',
                    url: thisElement.routes.methods.route('check_status'),
                    data: data,
                    dataType: 'json',
                    success: function(response){
                        if (response.data.message) {
                            thisElement.setAttribute('data-methods', dataMethods);
                            thisElement.setAttribute('data-texts', JSON.stringify({
                                'general-error-alert': response.data.message,
                                'main-action': '',
                            }));

                            self.blockedUser = true;
                        }
                    }
                });
            },
        },

    };

})(Zepto, window, document, thisElement);
</script>
</head><body></body></html>